<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Spark</title>
    <style>
        :root{
            --bg:#ffffff; --fg:#0f172a; --muted:#6b7280; --card:#f8fafc; --line:#e5e7eb;
            --btn:#0ea5e9; --btn-fg:#ffffff; --btn-hover:#0284c7; --warning:#b91c1c; --ok:#059669;
        }
        @media (prefers-color-scheme: dark){
            :root{ --bg:#0b0f19; --fg:#e5e7eb; --muted:#94a3b8; --card:#0f172a; --line:#1f2937;
                --btn:#0284c7; --btn-fg:#e5e7eb; --btn-hover:#0369a1; --warning:#ef4444; --ok:#10b981; }
        }
        [data-theme="light"]{ --bg:#ffffff; --fg:#0f172a; --muted:#6b7280; --card:#f8fafc; --line:#e5e7eb;
            --btn:#0ea5e9; --btn-fg:#ffffff; --btn-hover:#0284c7; --warning:#b91c1c; --ok:#059669;}
        [data-theme="dark"]{ --bg:#0b0f19; --fg:#e5e7eb; --muted:#94a3b8; --card:#0f172a; --line:#1f2937;
            --btn:#0284c7; --btn-fg:#e5e7eb; --btn-hover:#0369a1; --warning:#ef4444; --ok:#10b981;}

        html,body{ margin:0; padding:0; }
        body{ font-family: system-ui, Segoe UI, Roboto, Arial, sans-serif; background:var(--bg); color:var(--fg); width: 380px; }
        .wrap{ padding:12px; display:flex; flex-direction:column; gap:10px; }
        .topbar{ display:flex; align-items:center; justify-content:space-between; }
        h1{ font-size:16px; margin:0; }
        .theme{ display:flex; align-items:center; gap:6px; color:var(--muted); }
        .theme button{ border:1px solid var(--line); background:transparent; color:var(--muted);
            border-radius:8px; padding:4px 8px; cursor:pointer; }
        .theme button:hover{ color:var(--fg); border-color:var(--fg); }

        .card{ background:var(--card); border:1px solid var(--line); border-radius:12px; padding:10px; }
        .row{ display:flex; gap:8px; }
        .row > *{ flex:1; }
        label{ font-size:12px; color:var(--muted); display:block; margin-bottom:4px; }

        textarea, select, input[type="text"]{
            width:100%; border:1px solid var(--line); background:transparent; color:var(--fg);
            border-radius:10px; padding:8px; outline:none;
        }
        textarea{ min-height:88px; resize:vertical; }

        .switchline{ display:flex; align-items:center; gap:8px; justify-content:space-between; }
        .muted{ color:var(--muted); font-size:12px; }
        #counter{ font-size:12px; color:var(--muted); }

        .actions{ display:grid; grid-template-columns:1fr 1fr 1fr; gap:8px; }
        .actions-2{ display:grid; grid-template-columns:1fr 1fr; gap:8px; }

        button.primary{ background:var(--btn); color:var(--btn-fg); border:none; border-radius:10px; padding:10px; cursor:pointer; }
        button.primary:hover{ background:var(--btn-hover); }
        button.ghost{ border:1px solid var(--line); background:transparent; color:var(--fg); border-radius:10px; padding:10px; cursor:pointer; }
        button:disabled{ opacity:.6; cursor:not-allowed; }

        #out{ white-space:pre-wrap; background:var(--bg); border:1px dashed var(--line); border-radius:10px; padding:10px; min-height:56px; }
        #variantsBar{ display:none; gap:6px; margin-top:6px; }
        #variantsBar button{ padding:6px 8px; border-radius:8px; border:1px solid var(--line); background:transparent; color:var(--fg); font-size:12px; cursor:pointer; }

        .status{ font-size:12px; color:var(--muted); display:flex; align-items:center; gap:8px; }
        .spinner{ width:14px; height:14px; border:2px solid var(--line); border-top-color:var(--btn); border-radius:50%; display:inline-block; animation:spin .8s linear infinite; }
        @keyframes spin{ to{ transform:rotate(360deg); } }

        .toast{ position:fixed; inset:auto 12px 12px auto; background:var(--fg); color:var(--bg);
            padding:8px 10px; border-radius:10px; font-size:12px; opacity:0; transform:translateY(6px);
            transition:.25s; }
        .toast.show{ opacity:1; transform:translateY(0); }
        .error{ color:var(--warning); }

        .section-title{ font-size:12px; color:var(--muted); margin:4px 0; text-transform:uppercase; letter-spacing:.04em; }
    </style>
</head>
<body>
<div class="wrap" id="root">
    <div class="topbar">
        <h1>⚡ Spark</h1>
        <div class="theme">
            <span class="muted">Theme</span>
            <button id="themeAuto">Auto</button>
            <button id="themeLight">Light</button>
            <button id="themeDark">Dark</button>
        </div>
    </div>

    <div class="card">
        <div class="section-title">Input</div>
        <label for="input">Idea or text</label>
        <textarea id="input" placeholder="Paste your idea or select text on a page…"></textarea>

        <div class="row">
            <div>
                <label>Platform</label>
                <select id="platform">
                    <option value="twitter">X/Twitter</option>
                    <option value="linkedin">LinkedIn</option>
                    <option value="instagram">Instagram</option>
                    <option value="tiktok">TikTok</option>
                </select>
            </div>
            <div>
                <label>Tone</label>
                <select id="tone">
                    <option value="punchy">Punchy</option>
                    <option value="professional">Professional</option>
                    <option value="witty">Witty</option>
                    <option value="concise">Concise</option>
                </select>
            </div>
        </div>

        <div class="switchline">
            <label class="muted"><input id="clean" type="checkbox" style="vertical-align:middle; margin-right:6px;"> Clean (brand-safe)</label>
            <div id="counter">0 / 280</div>
        </div>
    </div>

    <div class="card">
        <div class="section-title">Create</div>
        <div class="actions">
            <button class="primary" id="btn-generate" title="Ctrl/⌘ + Enter">Generate</button>
            <button class="ghost"   id="btn-variants">Generate 3</button>
            <button class="ghost"   id="btn-rewrite"  title="Ctrl/⌘ + Shift + R">Rewrite</button>
        </div>
        <div class="actions" style="margin-top:8px;">
            <button class="ghost" id="btn-hashtags" title="Ctrl/⌘ + H">Hashtags</button>
            <button class="ghost" id="btn-summarize">Summarize page</button>
            <button class="ghost" id="btn-translate">Translate…</button>
        </div>
        <div class="actions-2" style="margin-top:8px;">
            <button class="ghost" id="btn-copy" title="Ctrl/⌘ + B">Copy</button>
            <button class="ghost" id="btn-insert" title="Ctrl/⌘ + I">Insert into page</button>
        </div>
    </div>

    <div class="card">
        <div class="section-title">Agent</div>
        <div class="row" style="align-items:center;">
            <label class="muted" style="display:flex;align-items:center;gap:8px;margin:0;">
                <input id="agentEnabled" type="checkbox" style="width:auto;"> Enable Daily Planner Agent
            </label>
            <select id="agentFrequency" title="Frequency">
                <option value="60">Hourly</option>
                <option value="180">Every 3 hours</option>
                <option value="720" selected>Daily</option>
            </select>
        </div>
        <input id="agentTopic" placeholder="Campaign topic (e.g., ‘AI tips for students’)" />
        <div class="actions-2">
            <button class="primary" id="btn-save-agent">Save Agent Settings</button>
            <button class="ghost"   id="btn-run-agent">Run now</button>
        </div>
        <div id="drafts" class="muted" style="margin-top:6px;"></div>
    </div>

    <div class="card">
        <div class="section-title">Output</div>
        <div id="out"></div>
        <div id="variantsBar">
            <span class="muted">Pick a variant:</span>
            <button id="pick1">1</button>
            <button id="pick2">2</button>
            <button id="pick3">3</button>
        </div>
        <div class="status">
            <span id="status" class="muted">Ready</span>
            <span id="spin" class="spinner" style="display:none;"></span>
        </div>
    </div>
</div>

<div id="toast" class="toast">Copied</div>

<script src="popup.js" type="module"></script>
</body>
</html>
